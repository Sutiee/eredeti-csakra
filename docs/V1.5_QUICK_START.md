# v1.5 Quick Start Guide
**Eredeti Csakra - Monetization & UX Improvements**

Gyors √∫tmutat√≥ a v1.5 verzi√≥ telep√≠t√©s√©hez √©s konfigur√°l√°s√°hoz.

---

## ‚úÖ El≈ëfelt√©telek (m√°r k√©sz)

- [x] Git repository l√©trehozva
- [x] Vercel project l√©trehozva √©s √∂sszekapcsolva
- [x] Supabase project l√©trehozva (`zvoaqnfxschflsoqnusg`)
- [x] Database t√°bl√°k l√©trehozva (quiz_results, purchases, meditation_access)
- [x] Storage bucket-ek l√©trehozva (detailed-reports, ebooks, meditations)

---

## üîß Setup L√©p√©sek (ezek m√©g hi√°nyoznak)

### 1. Stripe Konfigur√°ci√≥ (15 perc)

**A) Regisztr√°ci√≥ √©s be√°ll√≠t√°s:**
1. Menj a https://dashboard.stripe.com
2. Hozz l√©tre egy Stripe fi√≥kot (vagy jelentkezz be)
3. Toggle to **Test Mode** (k√©s≈ëbb √°tv√°ltunk Live Mode-ra)

**B) Term√©kek l√©trehoz√°sa:**

R√©szletes √∫tmutat√≥: [STRIPE_PRODUCT_SETUP.md](./STRIPE_PRODUCT_SETUP.md)

Gyors √∂sszefoglal√≥ - hozd l√©tre a 4 term√©ket:

| Term√©k | √År | Metadata kulcsok |
|--------|-----|------------------|
| R√©szletes PDF | 4990 HUF | `product_type: detailed_pdf` |
| Medit√°ci√≥k (7 db) | 9990 HUF | `product_type: meditations`, `meditation_count: 7` |
| Bundle (PDF+Med) | 12990 HUF | `product_type: bundle`, `includes_pdf: true` |
| K√©zik√∂nyv PDF | 6990 HUF | `product_type: ebook` |

**C) Webhook be√°ll√≠t√°sa:**
1. Developers ‚Üí Webhooks ‚Üí Add endpoint
2. URL: `https://eredeticsakra.vercel.app/api/webhooks/stripe`
3. Events: `checkout.session.completed`, `checkout.session.async_payment_succeeded`

**D) API kulcsok ment√©se:**
- Publishable key: `pk_test_xxx...`
- Secret key: `sk_test_xxx...`
- Webhook secret: `whsec_xxx...`

---

### 2. OpenAI API Kulcs (2 perc)

1. Menj a https://platform.openai.com/api-keys
2. Create new secret key
3. M√°sold ki: `sk-proj-xxx...`

**Haszn√°lat**: PDF gener√°l√°s GPT-4 Turbo-val (r√©szletes csakra elemz√©s)

---

### 3. ElevenLabs API Kulcs (5 perc)

**A) Regisztr√°ci√≥:**
1. Menj a https://elevenlabs.io
2. Regisztr√°lj (ingyenes tier: 10,000 karakter/h√≥)
3. Settings ‚Üí API Keys ‚Üí Create new key

**B) Magyar n≈ëi hang kiv√°laszt√°sa:**
1. Voice Library ‚Üí Browse
2. Keress r√°: "Hungarian female" vagy "magyar n≈ëi"
3. Aj√°nlott hangok:
   - **Rachel** (nyugodt, spiritu√°lis)
   - **Bella** (meleg, emp√°tikus)
4. Preview ‚Üí Copy Voice ID: `xxx...`

**Ment√©s**:
- API Key: `xxx...`
- Voice ID: `xxx...`

**Haszn√°lat**: 7 medit√°ci√≥s audi√≥f√°jl gener√°l√°sa (1 per csakra)

---

### 4. Resend Email API (3 perc)

1. Menj a https://resend.com
2. Sign up (ingyenes: 100 email/nap)
3. API Keys ‚Üí Create API Key
4. M√°sold ki: `re_xxx...`

**Domain setup (k√©s≈ëbbi l√©p√©s)**:
- K√©s≈ëbb hozz√°adhatod a saj√°t domain-edet (eredeticsakra.com)
- Most haszn√°ld: `onboarding@resend.dev` (teszt c√©lra)

**Haszn√°lat**:
- V√°s√°rl√°s visszaigazol√°s
- Meditation access token k√ºld√©s
- PDF let√∂lt√©si link

---

### 5. Environment Variables Be√°ll√≠t√°sa

**A) Helyi fejleszt√©shez** (.env.local):

```bash
# Copy example file
cp .env.local.example .env.local

# Majd t√∂ltsd ki a k√∂vetkez≈ë √©rt√©keket:
```

Nyisd meg a `.env.local` f√°jlt √©s add meg:

```bash
# Supabase (m√°r l√©tez≈ë)
NEXT_PUBLIC_SUPABASE_URL=https://zvoaqnfxschflsoqnusg.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...

# Stripe (1. l√©p√©sb≈ël)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxx...
STRIPE_SECRET_KEY=sk_test_xxx...
STRIPE_WEBHOOK_SECRET=whsec_xxx...

# Stripe Product IDs (4 term√©k ID-je a Dashboard-r√≥l)
STRIPE_PRODUCT_ID_DETAILED_PDF=prod_xxx...
STRIPE_PRODUCT_ID_MEDITATIONS=prod_xxx...
STRIPE_PRODUCT_ID_BUNDLE=prod_xxx...
STRIPE_PRODUCT_ID_EBOOK=prod_xxx...

# Stripe Price IDs
STRIPE_PRICE_ID_DETAILED_PDF=price_xxx...
STRIPE_PRICE_ID_MEDITATIONS=price_xxx...
STRIPE_PRICE_ID_BUNDLE=price_xxx...
STRIPE_PRICE_ID_EBOOK=price_xxx...

# OpenAI (2. l√©p√©sb≈ël)
OPENAI_API_KEY=sk-proj-xxx...

# ElevenLabs (3. l√©p√©sb≈ël)
ELEVENLABS_API_KEY=xxx...
ELEVENLABS_VOICE_ID=xxx...

# Resend (4. l√©p√©sb≈ël)
RESEND_API_KEY=re_xxx...
RESEND_FROM_EMAIL=onboarding@resend.dev
```

**B) Vercel Production k√∂rnyezethez:**

1. Menj a https://vercel.com/dashboard
2. Project Settings ‚Üí Environment Variables
3. Add meg **ugyanazokat** az √©rt√©keket mint fent
4. **FONTOS**: Live mode-ra v√°lt√°skor cser√©ld a test key-eket live key-ekre!

---

### 6. Medit√°ci√≥s Script-ek Gener√°l√°sa (opcion√°lis)

A medit√°ci√≥s audi√≥f√°jlok gener√°l√°s√°hoz el≈ësz√∂r sz√ºks√©ged lesz script-ekre.

**Opci√≥ A**: GPT-4 gener√°l√°s (aj√°nlott)
```bash
# Futtatd ezt a script-et (k√©s≈ëbb l√©trehozom):
npm run generate-meditation-scripts
```

**Opci√≥ B**: Manu√°lisan √≠rd meg a 7 script-et
- L√°sd: `docs/MEDITATION_SCRIPTS.md` (sablon)

---

### 7. Medit√°ci√≥s Audi√≥f√°jlok Gener√°l√°sa

Miut√°n a script-ek k√©szen vannak:

```bash
# Generate all 7 meditation audio files
npm run generate-meditations

# Vagy egyes√©vel:
node scripts/generate-meditation.js root
node scripts/generate-meditation.js sacral
# ... stb
```

Ez l√©trehozza a f√°jlokat √©s felt√∂lti ≈ëket a Supabase Storage `meditations` bucket-be.

---

### 8. Tesztel√©s

**A) Helyi tesztel√©s:**
```bash
npm run dev
```

1. Menj a http://localhost:3000
2. T√∂ltsd ki a kv√≠zt
3. Eredm√©ny oldalon pr√≥b√°ld ki a v√°s√°rl√°st (Stripe test mode)
4. Test card: `4242 4242 4242 4242`

**B) Webhook tesztel√©s (helyi):**
```bash
# Telep√≠tsd a Stripe CLI-t:
brew install stripe/stripe-cli/stripe

# Login:
stripe login

# Forward webhooks to localhost:
stripe listen --forward-to localhost:3000/api/webhooks/stripe

# Majd egy m√°sik termin√°lban trigger-elj egy checkout session-t:
stripe trigger checkout.session.completed
```

**C) Production tesztel√©s:**
1. Push to git ‚Üí Vercel auto-deploy
2. Nyisd meg: https://eredeticsakra.vercel.app
3. V√©gezz tesztv√°s√°rl√°st
4. Ellen≈ërizd a Stripe Dashboard ‚Üí Payments

---

## üêõ Gyakori Hib√°k

### Hiba: "Stripe publishable key not found"
**Megold√°s**: Ellen≈ërizd, hogy a `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY` be van-e √°ll√≠tva (prefix fontos!)

### Hiba: "Webhook signature verification failed"
**Megold√°s**:
- Helyi: haszn√°ld a Stripe CLI-t (`stripe listen`)
- Production: ellen≈ërizd, hogy a webhook secret helyes-e

### Hiba: "OpenAI API key invalid"
**Megold√°s**:
- Ellen≈ërizd, hogy a kulcs `sk-proj-` prefix-szel kezd≈ëdik
- N√©zd meg, hogy van-e credit a fi√≥kodban

### Hiba: ElevenLabs quota exceeded
**Megold√°s**:
- Ingyenes tier: max 10,000 karakter/h√≥
- Upgrade-elj Professional tier-re (~$22/h√≥)

---

## üìã Checklist

- [ ] Stripe fi√≥k l√©trehozva
- [ ] 4 term√©k l√©trehozva Stripe Dashboard-on
- [ ] Webhook endpoint be√°ll√≠tva
- [ ] OpenAI API kulcs megszerzve
- [ ] ElevenLabs fi√≥k l√©trehozva + Voice ID
- [ ] Resend API kulcs megszerzve
- [ ] `.env.local` f√°jl kit√∂ltve
- [ ] Vercel environment variables be√°ll√≠tva
- [ ] Helyi build sikeres (`npm run build`)
- [ ] Helyi teszt sikeres (checkout flow)
- [ ] Production deploy sikeres
- [ ] Production teszt sikeres

---

## üöÄ Next Steps

1. **Live Mode Aktiv√°l√°s** (amikor k√©szen √°llsz):
   - Stripe: Test Mode ‚Üí Live Mode toggle
   - Cser√©ld ki az API kulcsokat
   - V√©gezz √©les tesztv√°s√°rl√°st alacsony √∂sszeggel

2. **Domain Setup**:
   - Resend: add custom domain (eredeticsakra.com)
   - Stripe: update success/cancel URLs

3. **Marketing**:
   - Launch announcement
   - Email kamp√°ny
   - Social media

---

## üìö Tov√°bbi Dokument√°ci√≥

- [Stripe Product Setup](./STRIPE_PRODUCT_SETUP.md) - R√©szletes Stripe konfigur√°ci√≥
- [API Routes](./API_ROUTES.md) - API endpoint dokument√°ci√≥
- [Development Plan](./v1.5-DEVELOPMENT-PLAN.md) - Teljes v1.5 fejleszt√©si terv

---

## üí¨ Support

Ha elakadt√°l:
1. N√©zd meg a [FAQ-t](./FAQ.md)
2. Ellen≈ërizd a Vercel logs-ot
3. N√©zd meg a Stripe Dashboard ‚Üí Logs
4. √çrj nekem
